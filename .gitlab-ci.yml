image: robertcnelson/debian-bookworm-beagle-devscripts:latest

stages:
  - build

before_script:
  - apt-get update -qq && apt-get install -y -qq pru-gcc binutils-pru devscripts build-essential lintian

build:
  tags:
    - docker-arm64
  stage: build
  script:
    - autoreconf -vfi
    - ./configure --prefix=/usr/local --host=pru
    - make
    - export DISTCHECK_CONFIGURE_FLAGS="--host=pru --disable-toolchain-check" ; make distcheck

debian_package:
  tags:
    - docker-arm64
  stage: build
  script:
    - debuild -i -us -uc -b
